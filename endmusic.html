<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goofy 8-Bit Theme</title>
    <style>
        body {
            background-color: #2b2b2b;
            color: #5cf7c2;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            text-align: center;
        }
        
        .pixel-box {
            border: 4px solid #5cf7c2;
            padding: 40px;
            box-shadow: 10px 10px 0px #ff6b6b;
            image-rendering: pixelated;
        }

        h1 {
            text-transform: uppercase;
            font-size: 24px;
            margin-bottom: 20px;
            text-shadow: 2px 2px #000;
        }

        button {
            background-color: #ff6b6b;
            border: none;
            color: white;
            padding: 15px 30px;
            font-family: inherit;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 4px 4px 0px #000;
            transition: transform 0.1s;
        }

        button:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px #000;
        }

        .face {
            font-size: 60px;
            margin-bottom: 20px;
            display: block;
        }
    </style>
</head>
<body>

    <div class="pixel-box">
        <span id="face" class="face">UNKNOWN</span>
        <h1>Nonchalant 8-Bit</h1>
        <button id="playBtn">INSERT COIN (CLICK)</button>
    </div>

    <script>
        const btn = document.getElementById('playBtn');
        const face = document.getElementById('face');
        
        // Face animation states
        const faces = ["( ˘_˘)", "( ◡_◡)", "( °_°)", "( ¬_¬)"];
        let faceInterval;

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        // 8-bit sound generator
        function playTone(freq, type, startTime, duration, vol = 0.1) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();

            osc.type = type; // 'square' is very NES, 'triangle' is softer/bass
            osc.frequency.setValueAtTime(freq, startTime);
            
            // Envelope (Attack/Decay) to make it sound plucky
            gain.gain.setValueAtTime(vol, startTime);
            gain.gain.exponentialRampToValueAtTime(0.01, startTime + duration - 0.05);

            osc.connect(gain);
            gain.connect(audioCtx.destination);

            osc.start(startTime);
            osc.stop(startTime + duration);
        }

        function playSlide(startFreq, endFreq, type, startTime, duration, vol = 0.1) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            
            osc.frequency.setValueAtTime(startFreq, startTime);
            osc.frequency.linearRampToValueAtTime(endFreq, startTime + duration);

            gain.gain.setValueAtTime(vol, startTime);
            gain.gain.linearRampToValueAtTime(0.01, startTime + duration);

            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start(startTime);
            osc.stop(startTime + duration);
        }

        // The Song Data
        // Tempo: 120 BPM -> 1 beat = 0.5s. 
        // We want it slightly lazier, so let's do 0.4s per unit, but swung.
        
        function playSong() {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            const now = audioCtx.currentTime;
            const beat = 0.35; 
            
            // Frequencies
            const C4 = 261.63;
            const D4 = 293.66;
            const E4 = 329.63;
            const F4 = 349.23;
            const G4 = 392.00;
            const A4 = 440.00;
            const C3 = 130.81;
            const G3 = 196.00;
            const F3 = 174.61;

            // --- Melody (Square Wave - "Beep") ---
            // A lazy walk up, then a slide down
            playTone(C4, 'square', now + beat * 0, beat, 0.1);
            playTone(E4, 'square', now + beat * 1, beat, 0.1);
            playTone(G4, 'square', now + beat * 2, beat, 0.1);
            
            // The "Goofy" slide
            playSlide(A4, F4, 'square', now + beat * 3, beat * 2, 0.1); 

            // Rest
            
            // Second phrase
            playTone(D4, 'square', now + beat * 6, beat, 0.1);
            playTone(F4, 'square', now + beat * 7, beat, 0.1);
            playSlide(G4, E4, 'square', now + beat * 8, beat * 2, 0.1);

            // Final "Plonk"
            playTone(C4, 'square', now + beat * 11, beat/2, 0.1);
            playTone(G3, 'square', now + beat * 11.5, beat/2, 0.1);
            playTone(C4, 'square', now + beat * 12, beat, 0.1);


            // --- Bass (Triangle Wave - "Doot") ---
            // Just plodding along nonchalantly
            const bassVol = 0.2;
            [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].forEach(i => {
                // Alternating Root-Fifth mostly
                let note = (i % 2 === 0) ? C3 : G3;
                if (i > 5 && i < 11) note = (i % 2 === 0) ? D4/2 : G3; // shift to D minorish feel
                if (i === 12) note = C3;
                
                // Short staccato bass notes
                playTone(note, 'triangle', now + beat * i, beat * 0.5, bassVol);
            });
        }

        function animateFace() {
            let i = 0;
            faceInterval = setInterval(() => {
                face.innerText = faces[i % faces.length];
                i++;
                if (i > 15) { // Stop animation roughly when song ends
                    clearInterval(faceInterval);
                    face.innerText = faces[0];
                    btn.innerText = "PLAY AGAIN";
                    btn.disabled = false;
                }
            }, 350);
        }

        btn.addEventListener('click', () => {
            btn.disabled = true;
            btn.innerText = "VIBING...";
            playSong();
            animateFace();
        });

        // Init face
        face.innerText = faces[0];

    </script>
</body>
</html>